package com.example.my_application;

import androidx.annotation.NonNull;
import com.google.firebase.database.DatabaseReference;
import com.google.firebase.database.FirebaseDatabase;

public class FirebaseHandler {

    private final DatabaseReference databaseRef;

    public FirebaseHandler() {
        // Reference to "patients" node
        databaseRef = FirebaseDatabase.getInstance().getReference("patients");
    }

    // Add new patient
    public void addPatient(PatientModel patientModel, FirebaseCallback callback) {
        String patientId = databaseRef.push().getKey();

        if (patientId != null) {
            databaseRef.child(patientId).setValue(patientModel)
                    .addOnSuccessListener(unused -> callback.onSuccess())
                    .addOnFailureListener(e -> callback.onFailure(e.getMessage()));
        } else {
            callback.onFailure("Failed to generate patient ID");
        }
    }

    // Callback interface for operations
    public interface FirebaseCallback {
        void onSuccess();
        void onFailure(String error);
    }
}
